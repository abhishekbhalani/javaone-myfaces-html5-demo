<ui:composition template="/sections/sectionTemplate.xhtml"
      xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:hx="http://myfaces.apache.org/html5/html"
      xmlns:fx="http://myfaces.apache.org/html5/core"
      xmlns:sh="http://java.sun.com/jsf/composite/components/sh"
      xmlns:bs="http://java.sun.com/jsf/composite/components/browserSupport">

<ui:define name="title">
 Driving Properties and Client-Side Validation by JSF Validators/Converters
</ui:define>

<ui:define name="browserSupport">
  <bs:browserSupport>
      <f:facet name="webkit">
          This feature works in latest Webkit.
      </f:facet>
      <f:facet name="opera">
          This feature works in latest Opera.
      </f:facet>
  </bs:browserSupport>
</ui:define>

<ui:define name="sectionContent">
      
              <h:outputScript target="head" id="updateSliderValue">
		            function handleEvent(e){
		                if(e.status == 'success')
		                  alert('Request sent and respose recieved.');
		            }
		     </h:outputScript>
		     
		     <h:form id="clientSideValidationForm03">
	            <h:panelGrid columns="3">
	                
	                <h:outputLabel for="it03" value="Validation pattern driven by custom JSF validator"/>
                    <h:panelGroup>
	                    <hx:inputText id="it03" value="#{clientSideValidationBean.param03}" placeholder="Enter a promo code" cols="20" 
	                           alt="A promo code consists of 2 digits followed by 2 upper-case characters">
	                       <f:validator validatorId="promoCodeValidator" />
	                    </hx:inputText>
	                    <h:message for="it03" style="color:red; font-size:14px;" />
                    </h:panelGroup>
                    
                    <sh:sh><![CDATA[
<hx:inputText ...>
   <f:validator validatorId="promoCodeValidator" />
</hx:inputText>
                    ]]></sh:sh>

                    <button onclick="document.getElementById('clientSideValidationForm03:it03').pattern='[0-9]{2}'; document.getElementById('hackDesc').className='visible appear'; return false;">
                        Hacking Button
                    </button>
                    <h:panelGroup>
                        <div id="hackDesc" class="hidden" style="font-size:smaller; width: 200px; margin: 15px;">
                            <p>Now the pattern is changed. So any two-digit number is accepted on client-side!</p>
                            <p>But this is not the case on server-side.</p>
                            <p>Try to submit the form with any two digit number!</p> 
                        </div>
                    </h:panelGroup>
                    <sh:sh lang="js"><![CDATA[
//HACK:
document.getElementById('demoForm:it03').pattern='|0-9|{2}';
                    ]]></sh:sh>
                    
                    <h:outputText />
                    <input type="button" value="Try Submitting" 
                       onclick="if(submitForm('clientSideValidationForm03')){jsf.ajax.request(this,event, {execute:'@form',render:'@form',onevent: handleEvent})};return false;"/>
                    <h:outputText />
	                               
	            </h:panelGrid>
	        </h:form>

</ui:define>
</ui:composition>